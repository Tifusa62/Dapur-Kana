<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dapur Kana - Owner</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #00cfd3;
    }header {
  background: #004d4d;
  color: white;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
}

.hamburger {
  font-size: 24px;
  background: none;
  border: none;
  color: white;
  cursor: pointer;
  margin-right: 10px;
}

.title {
  font-size: 20px;
  font-weight: bold;
}

.main-container {
  padding: 16px;
  color: white;
}

input, textarea, select, button {
  display: block;
  width: 100%;
  margin-bottom: 12px;
  padding: 10px;
  font-size: 16px;
  border-radius: 6px;
  border: none;
}

input[type="file"] {
  background: white;
}

button {
  background: #004d4d;
  color: white;
  font-weight: bold;
}

.menu-list {
  margin-top: 20px;
  background: white;
  border-radius: 8px;
  padding: 16px;
  color: black;
}

  </style>
</head>
<body>
  <header>
    <button class="hamburger" id="menuToggle">â˜°</button>
    <div class="title">Owner Panel</div>
    <div></div>
  </header>  <div class="main-container">
    <h2>Login Owner</h2>
    <input type="email" id="email" placeholder="Email" value="oishidzato@gmail.com">
    <input type="password" id="password" placeholder="Password">
    <button onclick="login()">Login</button><div id="ownerPanel" style="display:none">
  <h2>Tambah Menu</h2>
  <input type="text" id="nama" placeholder="Nama Menu">
  <input type="number" id="harga" placeholder="Harga">
  <input type="text" id="kategori" placeholder="Kategori">
  <textarea id="deskripsi" placeholder="Deskripsi"></textarea>
  <input type="file" id="gambar">
  <button onclick="tambahMenu()">Tambah</button>

  <div class="menu-list" id="daftarMenu">
    <h3>Daftar Menu</h3>
    <!-- Daftar menu akan muncul di sini -->
  </div>
</div>

  </div>  <script type="module">
    import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

    const supabaseUrl = 'https://qcevidnjbsyjfdwfduiz.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFjZXZpZG5qYnN5amZkd2ZkdWl6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwMzcwODksImV4cCI6MjA2ODYxMzA4OX0.bR-FZBvVbY7njHKvI_lA0GPs4TaHQKq8YzX2a-dJ3JI';
    const supabase = createClient(supabaseUrl, supabaseKey);

    async function login() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      if (email !== 'oishidzato@gmail.com') {
        alert('Email tidak diizinkan');
        return;
      }

      const { data, error } = await supabase.auth.signInWithPassword({ email, password });
      if (error) {
        alert('Login gagal: ' + error.message);
      } else {
        document.getElementById('ownerPanel').style.display = 'block';
      }
    }

    window.login = login;

    async function tambahMenu() {
      const nama = document.getElementById('nama').value;
      const harga = document.getElementById('harga').value;
      const kategori = document.getElementById('kategori').value;
      const deskripsi = document.getElementById('deskripsi').value;
      const gambarFile = document.getElementById('gambar').files[0];

      if (!gambarFile) {
        alert('Pilih gambar terlebih dahulu.');
        return;
      }

      const fileExt = gambarFile.name.split('.').pop();
      const filePath = `${Date.now()}.${fileExt}`;
      const { data: uploadData, error: uploadError } = await supabase.storage.from('gambar').upload(filePath, gambarFile);

      if (uploadError) {
        alert('Gagal mengupload gambar: ' + uploadError.message);
        return;
      }

      const url = supabase.storage.from('gambar').getPublicUrl(filePath).data.publicUrl;

      const { data, error } = await supabase.from('menu').insert([{ nama, harga, kategori, deskripsi, gambar_url: url }]);
      if (error) {
        alert('Gagal menambahkan menu: ' + error.message);
      } else {
        alert('Menu berhasil ditambahkan');
        tampilkanMenu();
      }
    }

    window.tambahMenu = tambahMenu;

    async function tampilkanMenu() {
      const { data, error } = await supabase.from('menu').select('*');
      const list = document.getElementById('daftarMenu');
      if (data && data.length) {
        list.innerHTML = '<h3>Daftar Menu</h3>' + data.map(m => `<div><strong>${m.nama}</strong> - Rp${m.harga}</div>`).join('');
      } else {
        list.innerHTML = '<p>Belum ada menu</p>';
      }
    }

    tampilkanMenu();
  </script></body>
</html>
